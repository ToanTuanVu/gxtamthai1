<!doctype html>
<html class="no-js" lang="en">

<head>
  <% include ./../emlements/css %>

</head>

<body>
  <!--[if lt IE 8]>
		<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
	<![endif]-->
  <% include ./../emlements/defaultMenu2 %>
  <% include ./../emlements/defaultHeader2 %>

  <!-- Static Table Start -->
  <div class="data-table-area mg-b-15" style="margin-bottom: 20px;">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <div class="sparkline13-list">
            <div class="sparkline13-hd">
              <div class="main-sparkline13-hd">
                <h1>Tất <span class="table-project-n">Cả</span> Học Viên</h1>
              </div>
            </div>

            <div class="sparkline13-graph">
              <div class="datatable-dashv1-list custom-datatable-overright">
                <div class="row">
                  <form action="/add-attendance" method="POST"
                    class=" dropzone-custom needsclick add-professors" id="demo1-upload">
                    <div class="form-group col-lag-6 col-md-6 col-sm-6 col-xs-6">
                      <select name="idClass" class="form-control">
                        <% for (var i=0; i < roomAll.length; i++){ %>
                        <option value="<%= roomAll[i].id %>" selected > <%= roomAll[i].name %></option>

                        <%}%>
                        
                      </select>
                    </div>
                    <div class="col-lag-6 col-md-6 col-sm-6 col-xs-6 form-group">
                      <button type="submit" class="btn btn-custon-rounded-four btn-success col-lag-6 col-md-6 col-sm-6 col-xs-6">Thêm</button>
                     </div>
                  </form>
                </div>
                <div class="row">
                  <form id = "formClass" action="/attendance" method="GET"
                    class=" dropzone-custom needsclick add-professors" id="demo1-upload">
                    <div class="form-group col-lag-6 col-md-6 col-sm-6 col-xs-6">
                      <select id="classId" name="idClass" class="form-control">
                        <% for (var i=0; i < roomAll.length; i++){ %>
                        <option value="<%= roomAll[i].id %>" > <%= roomAll[i].name %></option>

                        <%}%>
                        
                      </select>
                    </div>
                    <div class="col-lag-6 col-md-6 col-sm-6 col-xs-6 form-group">
                      <button type="submit" class="btn btn-custon-rounded-four btn-success col-lag-6 col-md-6 col-sm-6 col-xs-6">Thêm</button>
                     </div>
                  </form>
                </div>
                <div id="toolbar">
                  
                </div>
                
                
                <table data-toggle="table" data-pagination="true" data-search="true" data-show-columns="true"
                  data-show-pagination-switch="true" data-show-refresh="true" data-key-events="true"
                  data-show-toggle="true" data-resizable="true" data-cookie="true" data-cookie-id-table="saveId"
                  data-show-export="true" data-click-to-select="true" data-toolbar="#toolbar"  data-editable-url="/post-attendance" >
                  <thead>
                    <tr>
                      <!-- <th data-field="state" data-checkbox="true"></th> -->
                      <th data-field="id">ID</th>
                      <th data-field="holyName" data-editable="false">Tên Thánh</th>
                      <th data-field="name" data-editable="false">Họ và Tên</th>
                      <%for(let k=0; k < listDay[0].length ;k++){%>
                          <th data-id="username" id="username" data-field="<%=listDay[0][k].date%>" data-editable="true">
                            <%=listDay[0][k].date%></th>
                          <% }%>
                          <th data-field="class" data-editable="false">Lớp</th>
                          <!-- <th data-field="action">Action</th> -->
                          </tr>
                          </thead>
                          <tbody>
                            <!-- -->
                            <% for(let i=0; i < studentAll.length; i++){ 
                              let k=0;
                    %>

                            <tr data-id="username" id="username" data-idfield="<%= studentAll[i].id %>">
                              <td><%= studentAll[i].studentCode %></td>
                              <td><%= studentAll[i].holyName %></td>
                              <td><%= studentAll[i].lastName +" "+ studentAll[i].firstName %></td>
                              <%for (let j = 0; j < listDay[i].length;j++){ %>
                                <% while(k < listDay[0].length){ %>
                                  <!-- compare day of student with day of fist list  -->
                                <% if(listDay[i][j].date == listDay[0][k].date) { %>
                                <td><%= listDay[i][j].point%></td>
                                <%k++;break;}%>
                                <% if(listDay[i][j].date != listDay[0][k].date) {%>
                                <td>x</td>
                                <%k++;}%>
                                <%}%>
                                <%}%> 
                              <td><%= studentAll[i].clName %></td>

                              <!-- <td class="datatable-ct"><span class="pie">1/6</span> -->
                              <!-- </td> -->

                              <!-- <td class="datatable-ct"><i class="fa fa-check"></i> -->
                              <!-- </td> -->
                            </tr>
                            <% } %>

                          </tbody>


                          </table>

                      </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Static Table End -->
        <% include ./../emlements/defaultFooter2 %>
      </div>

      <!-- jquery
		============================================ -->
      <script src="js/vendor/jquery-1.12.4.min.js"></script>
      <!-- bootstrap JS
		============================================ -->
      <script src="js/bootstrap.min.js"></script>
      <!-- wow JS
		============================================ -->
      <script src="js/wow.min.js"></script>
      <!-- price-slider JS
		============================================ -->
      <script src="js/jquery-price-slider.js"></script>
      <!-- meanmenu JS
		============================================ -->
      <script src="js/jquery.meanmenu.js"></script>
      <!-- owl.carousel JS
		============================================ -->
      <script src="js/owl.carousel.min.js"></script>
      <!-- sticky JS
		============================================ -->
      <script src="js/jquery.sticky.js"></script>
      <!-- scrollUp JS
		============================================ -->
      <script src="js/jquery.scrollUp.min.js"></script>
      <!-- mCustomScrollbar JS
		============================================ -->
      <script src="js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
      <script src="js/scrollbar/mCustomScrollbar-active.js"></script>
      <!-- metisMenu JS
		============================================ -->
      <script src="js/metisMenu/metisMenu.min.js"></script>
      <script src="js/metisMenu/metisMenu-active.js"></script>
      <!-- data table JS
		============================================ -->
      <script src="js/data-table/bootstrap-table.js"></script>
      <script src="js/data-table/tableExport.js"></script>
      <script src="js/data-table/data-table-active.js"></script>
      <script src="js/data-table/bootstrap-table-editable.js"></script>
      <script src="js/data-table/bootstrap-editable.js"></script>
      <script src="js/data-table/bootstrap-table-resizable.js"></script>
      <script src="js/data-table/colResizable-1.5.source.js"></script>
      <script src="js/data-table/bootstrap-table-export.js"></script>
      <!--  editable JS
		============================================ -->
      <script src="js/editable/jquery.mockjax.js"></script>
      <script src="js/editable/mock-active.js"></script>
      <script src="js/editable/select2.js"></script>
      <script src="js/editable/moment.min.js"></script>
      <script src="js/editable/bootstrap-datetimepicker.js"></script>
      <script src="js/editable/bootstrap-editable.js"></script>
      <script src="js/editable/xediable-active.js"></script>
      <!-- Chart JS
		============================================ -->
      <script src="js/chart/jquery.peity.min.js"></script>
      <script src="js/peity/peity-active.js"></script>
      <!-- tab JS
		============================================ -->
      <script src="js/tab.js"></script>
      <!-- plugins JS
		============================================ -->
      <script src="js/plugins.js"></script>
      <!-- main JS
		============================================ -->
      <script src="js/main.js"></script>













      <!-- datapicker JS
            ============================================ -->
      <script src="js/datapicker/bootstrap-datepicker.js"></script>
      <script src="js/datapicker/datepicker-active.js"></script>
      <!-- input-mask JS
            ============================================ -->
      <script src="js/input-mask/jasny-bootstrap.min.js"></script>
      <!-- chosen JS
            ============================================ -->
      <script src="js/chosen/chosen.jquery.js"></script>
      <script src="js/chosen/chosen-active.js"></script>
      <!-- select2 JS
            ============================================ -->
      <script src="js/select2/select2.full.min.js"></script>
      <script src="js/select2/select2-active.js"></script>
      <!-- ionRangeSlider JS
            ============================================ -->
      <script src="js/ionRangeSlider/ion.rangeSlider.min.js"></script>
      <script src="js/ionRangeSlider/ion.rangeSlider.active.js"></script>
      <!-- rangle-slider JS
            ============================================ -->
      <script src="js/rangle-slider/jquery-ui-1.10.4.custom.min.js"></script>
      <script src="js/rangle-slider/jquery-ui-touch-punch.min.js"></script>
      <script src="js/rangle-slider/rangle-active.js"></script>
      <!-- knob JS
            ============================================ -->
      <script src="js/knob/jquery.knob.js"></script>
      <script src="js/knob/knob-active.js"></script>
      <!-- tab JS
            ============================================ -->
      <script src="js/tab.js"></script>


      <!-- tawk chat JS
            ============================================ -->
      <script src="js/tawk-chat.js"></script>
      <script>
        document.getElementById('formClass').classId.onchange = function() {
    var newaction = this.value;
    console.log (this.value);
    console.log(listDay);
    document.getElementById('formClass').action = "/attendance";
};
      </script>

</body>

</html>